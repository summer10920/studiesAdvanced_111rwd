<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.1/css/bootstrap.css"
      integrity="sha512-YfFXNd2o6swxA1M0ll6EDdnVdYdE6iz+C6k0Guqf18JW6sVq6Oz9lfbjOso+LMwwNYNxUbp7egkYmC2W/IyeVA=="
      crossorigin="anonymous"
    />
    <!-- <script
      src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"
      integrity="sha512-trzlduO3EdG7Q0xK4+A+rPbcolVt37ftugUSOvrHhLR5Yw5rsfWXcpB3CPuEBcRBCHpc+j18xtQ6YrtVPKCdsg=="
      crossorigin="anonymous"
    ></script> -->
  </head>

  <body class="my-5">
    <hr />
    <section class="container mb-5">
      <form class="row g-3 lokiValidation" novalidate>
        <div class="col-md-6 position-relative">
          <label for="lokiInput1" class="form-label">Text1</label>
          <input
            type="text"
            class="form-control"
            id="lokiInput1"
            value="Mark"
            required
          />
          <div class="valid-tooltip">good Message!!</div>
          <div class="invalid-tooltip">fail Message!!</div>
        </div>
        <div class="col-md-6  position-relative">
          <label for="lokiInput2" class="form-label">Text2</label>
          <input
            type="text"
            class="form-control"
            id="lokiInput2"
            value=""
            required
          />
          <div class="valid-tooltip">good Message!!</div>
          <div class="invalid-tooltip">fail Message!!</div>
        </div>
        <div class="col-12">
          <button class="btn btn-primary" type="submit">Submit form</button>
        </div>
      </form>
      <script>
        document.querySelectorAll('.lokiValidation').forEach(function (nod) {  //找到所有持有指定 class 之各項元素
          nod.addEventListener('submit', function (event) { //監測 submit 時，做以下事情
            if (!this.checkValidity()) { //如果這個元素的 checkValidity 為 false，代表驗證不通過
              event.preventDefault(); //取消當下的 event 預設行為
              event.stopPropagation(); //取消當下的傳遞與冒泡事件
              this.classList.add('was-validated'); //顯示驗證文字結果，出現之場合看個人需求
            }
          });
        });
      </script>
    </section>
    <hr />
    <section class="container mb-5">
      <form class="row g-3">
        <div class="col-md-6">
          <label for="lokiName" class="form-label">Name</label>
          <input type="text" class="form-control" id="lokiName" required />
        </div>
        <div class="col-md-6">
          <label for="lokiPWD" class="form-label">Password</label>
          <input type="password" class="form-control" id="lokiPWD" required />
        </div>
        <div class="col-12">
          <button class="btn btn-primary" type="submit">Submit</button>
        </div>
      </form>
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          // 另一種 document.ready 的方法
          document.querySelector("#lokiName").oninvalid = function () {
            //當進行驗證事件時，如果不通過在指定物件變數獲得 false，顯示自訂提示字
            if (!this.validity.valid) this.setCustomValidity("你沒名字嗎？");
          };
          document.querySelector("#lokiName").oninput = function () {
            //當使用者進行編寫時，清除提示字。將不再顯示輸出
            this.setCustomValidity("");
          };

          //本身還是會有基本的 text 不留白的檢查
          document.querySelector("#lokiPWD").oninput = function () {
            //當使用者進行編寫時，進行另一種正規檢查而更改提示字
            this.setCustomValidity("");
            let mystr = new RegExp("\\d{4}$");
            if (!mystr.test(this.value))
              this.setCustomValidity("只能 4 個數字以上");
          };
        });
      </script>
    </section>
  </body>
</html>
